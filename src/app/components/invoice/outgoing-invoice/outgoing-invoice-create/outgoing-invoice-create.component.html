<div>
  <form [formGroup]="invoiceForm" (ngSubmit)="onSubmit(invoiceForm)">
    <label>
      Номер ТТН
      <input type="text" [formControl]="invoiceForm.controls['number']">
    </label>

    <label>
      Дата выписки ТТН
      <input type="date" [formControl]="invoiceForm.controls['issueDate']">
    </label>

    <button type="button" (click)="openTransportModal()">Выбрать перевозчика</button>

    <button type="button" (click)="openReceiverModal()">Выбрать получателя</button>

    <label>
      Номер транспортного средства
      <input type="text" [formControl]="invoiceForm.controls['transportNumber']">
    </label>

    <label>
      Название транспортного средства
      <input type="text" [formControl]="invoiceForm.controls['transportName']">
    </label>

    <!-- todo
    <label>
      Водитель
      <input type="text" [formControl]="invoiceForm.controls['driver']">
    </label>
    -->

    <label>
      Описание
      <textarea [formControl]="invoiceForm.controls['description']"></textarea>
    </label>

    <label>
      Сумма товаров по ТТН
      <input type="number" [formControl]="invoiceForm.controls['goodsEntryCount']">

      <select [formControl]="invoiceForm.controls['goodsEntryCountUnit']" required>
        <option *ngFor="let unit of priceUnits" [value]="unit.name">
          {{unit.name}}
        </option>
      </select>
    </label>

    <label>
      Количество наименований товаров по ТТН
      <input type="number" [formControl]="invoiceForm.controls['goodsQuantity']">

      <select [formControl]="invoiceForm.controls['goodsQuantityUnit']" required>
        <option *ngFor="let unit of quantityUnits" [value]="unit.name">
          {{unit.name}}
        </option>
      </select>
    </label>

    <div>
      <h2>Товары</h2>
      <table>
        <tr>
          <th>Название</th>
          <th>Количество</th>
          <th>Цена</th>
          <th>Вес</th>
          <th></th>
        </tr>
        <tr *ngFor="let goods of goodsList">
          <th>{{goods.name}}</th>
          <th>{{goods.quantity}} {{goods.quantityUnit.name}}</th>
          <th>{{goods.price}} {{goods.priceUnit.name}}</th>
          <th>{{goods.weight}} {{goods.weightUnit.name}}</th>
          <th>
            <button (click)="deleteGoods(goods)">
              Удалить
            </button>
          </th>
        </tr>
      </table>

      <button type="button" (click)="chooseGoods()">Выбрать товары</button>
    </div>

    <input type="submit">
  </form>

  <div class="reveal" id="transportModal" data-reveal >
    <button class="close-button" type="button" data-close>
      <span aria-hidden="true">&times;</span>
    </button>
    <app-tr-company-choice (company)="saveTransport($event)"></app-tr-company-choice>
  </div>

  <div class="reveal" id="receiverModal" data-reveal >
    <button class="close-button" type="button" data-close>
      <span aria-hidden="true">&times;</span>
    </button>
    <app-customer-choice (customer)="saveReceiver($event)"></app-customer-choice>
  </div>

  <div class="reveal" id="goodsModal" data-reveal >
    <button class="close-button" type="button" data-close (click)="closeGoodsModal()">
      <span aria-hidden="true">&times;</span>
    </button>
    <div appGoodsModalAnchor></div>
  </div>
</div>
